(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{3058:function(e,t,n){"use strict";var r=n(8546);let i=(0,r.Z)();t.Z=i},8874:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/room/detail/[id]/edit/[tid]",function(){return n(6769)}])},6186:function(e,t,n){"use strict";var r=n(4246),i=n(6233);let l=e=>{let{children:t}=e;return(0,r.jsx)(i.Z,{position:"fixed",bottom:"16px",right:"16px",children:t})};t.Z=l},2910:function(e,t,n){"use strict";var r=n(4246),i=n(6233);let l=e=>{let{label:t,children:n}=e;return(0,r.jsxs)(i.Z,{mb:"16px",children:[(0,r.jsx)(i.Z,{mb:"4px",children:t}),(0,r.jsx)(i.Z,{children:n})]})};t.Z=l},188:function(e,t,n){"use strict";var r=n(4246);n(7378);var i=n(9894),l=n.n(i),a=n(8038),s=n.n(a),o=n(7545),u=n(2384),c=n(2133),d=n(2750),h=n(8666),x=n(2709),v=n(1434),Z=n(6233);let j=(0,x.ZP)(Z.Z)(e=>{let{theme:t}=e;return t.mixins.toolbar}),f=e=>{let{children:t,title:n,prev:i}=e,a="物件管理システム",x=void 0===n?a:"".concat(n," - ").concat(a);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:x}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.jsxs)("header",{children:[(0,r.jsx)(o.Z,{position:"fixed",children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(c.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},href:null!=i?i:"",disabled:void 0===i,children:(0,r.jsx)(v.Z,{})}),(0,r.jsx)(d.Z,{variant:"h6",component:"h1",flexGrow:1,children:null!=n?n:a}),(0,r.jsx)(Z.Z,{display:"flex",flexGrow:0,children:[{title:"トップ",href:"/"},{title:"物件一覧",href:"/apartment"},{title:"入居状況",href:"/room"},{title:"レシート発行",href:"/invoice"}].map(e=>(0,r.jsx)(h.Z,{sx:{my:2,color:"white",display:"block"},LinkComponent:l(),href:e.href,children:e.title},e.href))})]})}),(0,r.jsx)(j,{})]}),t]})};t.Z=f},2307:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var r=n(4246),i=n(3437),l=n(1602),a=n(2588),s=n(2162),o=n(5996),u=n(8666),c=n(7378);let d=e=>{let{title:t,text:n,cancel:d,ok:h}=e,x=(0,c.useRef)(),[v,Z]=(0,c.useState)(!1);(0,c.useRef)(null),(0,c.useCallback)(()=>{x.current&&(x.current(!0),x.current=void 0,Z(!1))},[Z]);let j=(0,c.useCallback)(()=>{x.current&&(x.current(!1),x.current=void 0,Z(!1))},[Z]),f=(0,c.useCallback)(()=>x.current?Promise.resolve(!1):(Z(!0),new Promise(e=>{x.current=e})),[Z]);return[f,(0,r.jsxs)(i.Z,{open:v,onClose:j,children:[(0,r.jsx)(l.Z,{children:t||"確認"}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(s.Z,{children:n})}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(u.Z,{onClick:j,children:d||"キャンセル"}),(0,r.jsx)(u.Z,{onClick:j,autoFocus:!0,children:h||"OK"})]})]})]}},7308:function(e,t,n){"use strict";var r=n(4246),i=n(3999);let l=e=>{let{onChange:t,...n}=e,l=e=>{t(e.target.value)};return(0,r.jsx)(i.Z,{fullWidth:!0,onChange:l,...n})};t.Z=l},8309:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(4246),i=n(1056),l=n(2750),a=n(8666),s=n(3058),o=n(6233),u=n(6677),c=n(7378),d=n(6186),h=n(3999);let x=e=>{let{value:t,onChange:n}=e,[i,l]=(0,c.useState)("");(0,c.useEffect)(()=>{t!==i&&l(null!=t?t:"")},[t]);let a=(0,c.useCallback)(e=>{let t=e.target.value;l(t),n(""===t?null:t)},[l]);return(0,r.jsx)(h.Z,{fullWidth:!0,type:"date",value:i,onChange:a})};var v=n(7308),Z=n(2910),j=n(2307),f=n(7917);let m=e=>{var t,n,h;let{apartment:m,room:p,tenant:b,onSave:w}=e,C=(0,u.useRouter)(),[g,k]=(0,j.G)({text:"入居者の情報を削除してよろしいですか？"}),_=e=>{e.preventDefault(),w({name:P,since:E,until:T})},y=async()=>{let e=null==b?void 0:b.id;void 0!==e&&await g()&&(await i.L.deleteTenant.mutate({id:e}),C.push("/room/".concat(p.id,"/detail")))},[P,S]=(0,c.useState)(null!==(t=null==b?void 0:b.name)&&void 0!==t?t:""),[E,N]=(0,c.useState)(null!==(n=null==b?void 0:b.since)&&void 0!==n?n:null),[T,G]=(0,c.useState)(null!==(h=null==b?void 0:b.until)&&void 0!==h?h:null);return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("form",{onSubmit:_,children:[(0,r.jsx)(o.Z,{my:"32px",children:(0,r.jsxs)(l.Z,{variant:"h6",children:[m.name," / ",p.name]})}),(0,r.jsx)(Z.Z,{label:"入居者名",children:(0,r.jsx)(v.Z,{value:P,onChange:S})}),(0,r.jsx)(Z.Z,{label:"入居日",children:(0,r.jsx)(x,{value:E,onChange:N})}),(0,r.jsx)(Z.Z,{label:"退去日",children:(0,r.jsx)(x,{value:T,onChange:G})}),(0,r.jsx)(d.Z,{children:(0,r.jsx)(a.Z,{variant:"contained",type:"submit",endIcon:(0,r.jsx)(f.Z,{}),children:"保存"})}),(null==b?void 0:b.id)&&(0,r.jsx)(a.Z,{variant:"contained",onClick:y,children:"削除"})]}),k]})};var p=m},6769:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(4246),i=n(188),l=n(4200),a=n(1056),s=n(6677),o=n(8309);function u(){let e=(0,s.useRouter)(),{id:t,tid:n}=l.ZP.object({id:l.ZP.string(),tid:l.ZP.string()}).parse(e.query),u=a.W.getTennant.useQuery({tenantId:n,roomId:t}),c=async t=>{var n,r;let i=null===(n=u.data)||void 0===n?void 0:n.roomId,l=null===(r=u.data)||void 0===r?void 0:r.id;await a.L.editTenant.mutate({...t,id:l}),e.push("/room/detail/".concat(i))};return u.data?(0,r.jsx)(i.Z,{title:"部屋の入居者変種",prev:"/room/detail/".concat(u.data.room.id),children:(0,r.jsx)(o.Z,{apartment:u.data.room.apartment,room:u.data.room,tenant:u.data,onSave:c})}):void 0}}},function(e){e.O(0,[849,952,301,774,888,179],function(){return e(e.s=8874)}),_N_E=e.O()}]);