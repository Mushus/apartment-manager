(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[208],{1967:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apartment/edit",function(){return n(801)}])},6186:function(e,t,n){"use strict";var r=n(4246),l=n(6233);let i=e=>{let{children:t}=e;return(0,r.jsx)(l.Z,{position:"fixed",bottom:"16px",right:"16px",children:t})};t.Z=i},2910:function(e,t,n){"use strict";var r=n(4246),l=n(6233);let i=e=>{let{label:t,children:n}=e;return(0,r.jsxs)(l.Z,{mb:"16px",children:[(0,r.jsx)(l.Z,{mb:"4px",children:t}),(0,r.jsx)(l.Z,{children:n})]})};t.Z=i},188:function(e,t,n){"use strict";var r=n(4246);n(7378);var l=n(9894),i=n.n(l),s=n(8038),a=n.n(s),u=n(7545),c=n(2384),o=n(2133),d=n(2750),h=n(8666),x=n(2709),m=n(1434),j=n(6233);let Z=(0,x.ZP)(j.Z)(e=>{let{theme:t}=e;return t.mixins.toolbar}),f=e=>{let{children:t,title:n,prev:l}=e,s="物件管理システム",x=void 0===n?s:"".concat(n," - ").concat(s);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:x}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.jsxs)("header",{children:[(0,r.jsx)(u.Z,{position:"fixed",children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(o.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},href:null!=l?l:"",disabled:void 0===l,children:(0,r.jsx)(m.Z,{})}),(0,r.jsx)(d.Z,{variant:"h6",component:"h1",flexGrow:1,children:null!=n?n:s}),(0,r.jsx)(j.Z,{display:"flex",flexGrow:0,children:[{title:"トップ",href:"/"},{title:"物件一覧",href:"/apartment"},{title:"入居状況",href:"/room"},{title:"レシート発行",href:"/invoice"}].map(e=>(0,r.jsx)(h.Z,{sx:{my:2,color:"white",display:"block"},LinkComponent:i(),href:e.href,children:e.title},e.href))})]})}),(0,r.jsx)(Z,{})]}),t]})};t.Z=f},2307:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var r=n(4246),l=n(3437),i=n(1602),s=n(2588),a=n(2162),u=n(5996),c=n(8666),o=n(7378);let d=e=>{let{title:t,text:n,cancel:d,ok:h}=e,x=(0,o.useRef)(),[m,j]=(0,o.useState)(!1);(0,o.useRef)(null),(0,o.useCallback)(()=>{x.current&&(x.current(!0),x.current=void 0,j(!1))},[j]);let Z=(0,o.useCallback)(()=>{x.current&&(x.current(!1),x.current=void 0,j(!1))},[j]),f=(0,o.useCallback)(()=>x.current?Promise.resolve(!1):(j(!0),new Promise(e=>{x.current=e})),[j]);return[f,(0,r.jsxs)(l.Z,{open:m,onClose:Z,children:[(0,r.jsx)(i.Z,{children:t||"確認"}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(a.Z,{children:n})}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(c.Z,{onClick:Z,children:d||"キャンセル"}),(0,r.jsx)(c.Z,{onClick:Z,autoFocus:!0,children:h||"OK"})]})]})]}},7308:function(e,t,n){"use strict";var r=n(4246),l=n(3999);let i=e=>{let{onChange:t,...n}=e,i=e=>{t(e.target.value)};return(0,r.jsx)(l.Z,{fullWidth:!0,onChange:i,...n})};t.Z=i},801:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(4246),l=n(7378),i=n(6968),s=n(6999),a=n(4200),u=n(8784),c=n(6677),o=n(188),d=n(1056),h=n(2307),x=n(8973),m=n(6538),j=n(8666),Z=n(9073),f=n(7917),p=n(7308),k=n(2910),v=n(6186);let b=(e,t)=>(0,l.useCallback)(n=>{e(e=>({...e,[t]:n}))},[e]),C=e=>{let{apartment:t,rooms:n}=e,s=(0,c.useRouter)(),[a,Z]=(0,l.useState)(t),[C,w]=(0,l.useState)(n),_=b(Z,"name"),g=(0,l.useCallback)(e=>{let{oldIndex:t,newIndex:n}=e;return w(e=>(0,i.q)(e,t,n))},[Z]),R=(0,l.useCallback)((e,t)=>{w(n=>{let r=n.findIndex(t=>t.key===e);if(-1===r)return n;let l=[...n];return l[r]={...l[r],...t},l})},[Z]),P=(0,l.useCallback)(e=>{e.preventDefault(),(async()=>{await d.L.updateApartments.mutate({...a,rooms:C}),s.push("/apartment")})()},[C,a]),[E,N]=(0,h.G)({text:"マンションを削除してよろしいですか？"}),S=(0,l.useCallback)(async()=>{await E()&&(await d.L.deleteApartment.mutate({id:a.id}),s.push("/apartment"))},[a.id]),I=(0,l.useCallback)(()=>{w(e=>[...e,{key:(0,u.uniqueId)("room"),id:null,name:""}])},[Z]),q=(0,l.useCallback)(e=>{w(t=>{let n=t.findIndex(t=>t.key===e);if(-1===n)return t;let r=[...t];return r.splice(n,1),r})},[Z]);return(0,r.jsx)(o.Z,{title:"アパート編集",prev:"/apartment",children:(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)("form",{onSubmit:P,children:[(0,r.jsx)(k.Z,{label:"名前",children:(0,r.jsx)(p.Z,{value:a.name,onChange:_})}),(0,r.jsxs)(m.Z,{mb:"8",children:[(0,r.jsx)(y,{rooms:C,onSortEnd:g,onUpdateRoom:R,onDeleteRoom:q}),(0,r.jsx)(j.Z,{onClick:I,children:"部屋追加"})]}),(0,r.jsx)(j.Z,{onClick:S,children:"削除"}),(0,r.jsx)(v.Z,{children:(0,r.jsx)(j.Z,{variant:"contained",type:"submit",endIcon:(0,r.jsx)(f.Z,{}),children:"保存"})})]}),N]})})},y=(0,s.JN)(e=>{let{rooms:t,onUpdateRoom:n,onDeleteRoom:l}=e;return(0,r.jsx)(m.Z,{children:t.map((e,t)=>(0,r.jsx)(w,{room:e,index:t,onUpdateRoom:n,onDeleteRoom:l},e.key))})}),w=(0,s.W8)(e=>{let{room:t,onUpdateRoom:n,onDeleteRoom:i}=e,s=(0,l.useCallback)(e=>{n(t.key,{name:e.target.value})},[n,t.key]),a=(0,l.useCallback)(()=>{i(t.key)},[i,t.key]);return(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(j.Z,{onClick:a,children:"削除"}),(0,r.jsx)(m.Z,{mb:"2",children:"部屋名"}),(0,r.jsx)(Z.Z,{value:t.name,onChange:s})]})});function _(){var e;let t=(0,c.useRouter)(),n=a.ZP.object({id:a.ZP.string()}).parse(t.query),l=d.W.getApartment.useQuery(n),i=null===(e=l.data)||void 0===e?void 0:e.rooms.map(e=>({...e,key:(0,u.uniqueId)("room-server")}));return l.data&&i?(0,r.jsx)(C,{apartment:l.data,rooms:i}):void 0}}},function(e){e.O(0,[33,849,952,301,390,774,888,179],function(){return e(e.s=1967)}),_N_E=e.O()}]);